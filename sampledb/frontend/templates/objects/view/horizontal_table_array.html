{% if search_query_attribute %}
  {% set base_search_query_attribute = search_query_attribute %}
{% else %}
  {% set base_search_query_attribute = "" %}
{% endif %}
<div class="row" style="padding-right: 0.75em;">
  {% include "objects/property_label.html" %}
</div>
<div style="padding-left:2.5em;">
  {% if schema["items"]["type"] == 'object' %}
    <table class="table">
      <tbody>
        {% set item_property_names = schema["items"].properties.keys() %}
        {% set property_order = schema.get('items', {}).get('propertyOrder', []) %}
        {% for property_name in property_order %}
          {% if property_name in item_property_names %}
            {% set search_query_attribute = base_search_query_attribute + ".%s.%s" | format('?', property_name) %}
            <tr>
              <th scope="col">
                {% include "objects/table_property_label.html" %}
              </th>
              {% if data is not none %}
                {% for item in data %}
                  <td>
                    {% set name = property_name %}
                    {% set schema = schema['items'].properties[property_name] %}
                    {% set z = schema.update({'parent_style': 'horizontal_table'}) %}
                    {% if property_name in item %}
                      {% set data = item[property_name] %}
                    {% else %}
                      {% set data = none %}
                    {% endif %}
                    {% set entry_index = loop.index0 %}
                    {% set search_query_attribute = base_search_query_attribute + ".%d.%s" | format(entry_index, name) %}
                    {% include "objects/view/any.html" %}
                  </td>
                {% endfor %}
              {% endif %}
            </tr>
          {% endif %}
        {% endfor %}
        {% for property_name in item_property_names %}
          {% if property_name not in property_order %}
            {% set search_query_attribute = base_search_query_attribute + ".%s.%s" | format('?', property_name) %}
              <tr>
                <th scope="col">
                  {% include "objects/table_property_label.html" %}
                </th>
                {% if data is not none %}
                  {% for item in data %}
                    <td>
                      {% set name = property_name %}
                      {% set schema = schema['items'].properties[property_name] %}
                      {% set z = schema.update({'parent_style': 'horizontal_table'}) %}
                      {% if property_name in item %}
                        {% set data = item[property_name] %}
                      {% else %}
                        {% set data = none %}
                      {% endif %}
                      {% set entry_index = loop.index0 %}
                      {% set search_query_attribute = base_search_query_attribute + ".%d.%s" | format(entry_index, name) %}
                      {% include "objects/view/any.html" %}
                    </td>
                  {% endfor %}
                {% endif %}
              </tr>
            {% endif %}
          {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>{{ _('Unsupported item type for horizontal_table style.') }}</p>
  {% endif %}
</div>
